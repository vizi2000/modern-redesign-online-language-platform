// Prisma schema

generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  STUDENT
  TUTOR
}

model User {
  id       Int      @id @default(autoincrement())
  email    String   @unique
  password String
  role     Role
  tutorProfile   TutorProfile?
  studentProfile StudentProfile?
}

model TutorProfile {
  id            Int    @id @default(autoincrement())
  user          User   @relation(fields: [userId], references: [id])
  userId        Int    @unique
  qualification String
  availability  String
  teachingLevels      String?
  specializations     String?
  teachingMethods     String?
  teachingPersonality String?
  hourlyRate          Int?
  bookings      Booking[]
}

model StudentProfile {
  id      Int  @id @default(autoincrement())
  user    User @relation(fields: [userId], references: [id])
  userId  Int  @unique
  currentLevel       String?
  targetLevel        String?
  learningPreferences String?
  availability        String?
  personalityTraits   String?
  learningGoals       String?
  budgetRange         String?
  bookings Booking[]
}

model Booking {
  id        Int       @id @default(autoincrement())
  student   StudentProfile @relation(fields: [studentId], references: [id])
  studentId Int
  tutor     TutorProfile   @relation(fields: [tutorId], references: [id])
  tutorId   Int
  requestedAt DateTime @default(now())
  status    String     @default("PENDING")
}
